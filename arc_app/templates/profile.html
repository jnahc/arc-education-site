{% extends 'base.html' %}

{% block content %}

<div class="card">
  <div class="card-header">
    {{user.username}}'s Profile
  </div>

  <img src="https://picsum.photos/id/334/300/200" class="card-img-right" alt="{{user.username}}">
  <div class="card-body">
    <h5 class="card-title">{{user.first_name}} {{user.last_name}} - {{user.email}}</h5>

    <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
    <a href="{% url 'course_create' %}" class="btn btn-primary">Create Course</a>
    <a href="#" class="btn btn-primary">See Courses</a>
  </div>
</div>
<ul>
  <h2>Courses I Created</h2>
  {% for course in courses %}
  <li class="track">
    <p>{{ course.title }}</p>
    <a href="{% url 'course_detail' course_slug=course.slug %}">
      <img src="{{course.photo_url}}" alt="{{course.title}}" class="course-pic">      
    </a>
    <p>
      <span>
        <a href="{% url 'course_edit' course_slug=course.slug %}">Edit</a>
      </span>
      <span>
        <a href="{% url 'course_delete' course_slug=course.slug %}">Delete</a>
      </span>
    </p>
  </li>
{% endfor %}
</ul>
<ul class="purchase">
  <h2>
    Purchases
  </h2>
  {% for purchase in purchases %}
    <li class="purchase">
      <img src="{{purchase.course.photo_url}}" alt="{{purchase.course.title}}">
      <p>{{ purchase.student.first_name }} -  {{ purchase.student.last_name }}</p>
      <p>
        {{purchase.course.title}} Details
          <ul>
              <li>Description: {{purchase.course.description}}</li>
              <li>Start Date: {{purchase.course.start_date}}</li>
              <li>End Date: {{purchase.course.end_date}}</li>
              <li>Category: {{purchase.course.category}}</li>
          </ul>
          <p>
            <a href="{% url 'purchase_delete' course_slug=purchase.course.slug  purchase_pk=purchase.pk %}">Remove Purchase</a>
          </p>
      </p>
      
    </li>
  </a>
  {% endfor %}
</ul>


{% endblock %}

